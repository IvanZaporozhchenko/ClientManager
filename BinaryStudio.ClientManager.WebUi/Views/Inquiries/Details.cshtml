@using BinaryStudio.ClientManager.DomainModel.Infrastructure
@model BinaryStudio.ClientManager.DomainModel.Entities.Inquiry

@{
    ViewBag.Title = "Inquiry Details";
}

<div id="details" class="container">
    <div class="row-fluid">
        <div class="span4">
            <div>
                <div>
                    <div class="inquiry">
                        <div class="row-fluid">
                            <div class="span4">
                                <img class="pull-left" src="@Model.Client.PhotoUri.Or(Url.DefaultPhoto())" alt="Photo" width="48" height="48"/>
                            </div>
                            <div class="span8 primary-info">
                                <span class="name">@Model.Client.FullName</span><br/>
                                <span class="subject">@Model.Subject</span><br/>
                            </div>
                        </div>
                        <div class="secondary-info">
                            <p>
                                <div class="phone">
                                    <span class="icon-headphones"></span> @Html.SkypeLink(Model.Client.Phone)
                                </div>
                                <div class="email">
                                    <span class="icon-envelope"></span> @Html.Email(Model.Client.Email, Model.Client.Email)
                                </div>
                            </p>
                            <p><span class="icon-flag"></span>Country: @Model.Client.Country</p>
                            <p><span class="icon-calendar"></span>Since @Model.Client.CreationDate</p>
                            <p><span class="icon-user"></span> @Model.Assignee.SafeGet(x => x.FullName).Or("N/A")</p>
                        </div>
                        <div>
                            <a href="@Model.Client.FacebookUri">
                                <span class="facebook-icon"></span>
                            </a>
                            <a href="@Model.Client.TwitterUri">
                                <span class="twitter-icon"></span>
                            </a> 
                            <a href="@Model.Client.LinkedInUri">
                                <span class="linkedin-icon"> </span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="tags">
                    <h3>Tags</h3>                    
                    <ul>
                        @foreach(var tag in Model.Tags)
                        {
                            <li class="tag">@tag.Name</li>
                        }
                    </ul>
                </div>
                <div class="comments">
                    <h3>Comments</h3>
                    @foreach(var comment in Model.Comments)
                    {
                        <div class="comment">
                            <div class="comment-date">@comment.Date</div>                               
                            <div class="comment-text">@comment.Text</div>
                        </div>
                    }
                </div>
            </div>
        </div>
        <div class="span8">
            @{
                Html.RenderAction("MailingHistory","Clients", new {id = Model.Client.Id});
            }
        </div>
    </div>
</div>